define(["angular","echarts"],function(e){return function(e,t,a,r){e.controller("myaccountCtrl",["$rootScope","$scope","cService","$window","G","popupDialog","$compile","$state","$cookieStore",function(e,t,a,r,n,o,c,u,l){"use strict";var i=l.get("curUser");t.time=-1,t.pageSize=5,t.page=1,t.changeTime=function(){if(""!=t.time){t.searchDate=!1;var e=document.getElementById("startTime"),a=document.getElementById("endTime");e.value="",a.value=""}else t.searchDate=!0};var m,s,d=t.time;t.jump=function(e){5!=i.realNameStatus||1!=i.userType&&2!=i.userType?1==e?u.go("account.recharge"):u.go("account.withdrawals"):alert("请等待平台运营人员进行企业信息核实",{closeBtn:!0})},t.change=function(e,r){var n=document.getElementById("startTime"),o=document.getElementById("endTime");r||(d=t.time,m=n.value,s=o.value),a.ajax({method:"post",url:"account/accountlogs",params:{page:e,rows:5,time:t.time,startTime:m,endTime:s}}).success(function(e,a,n,o){t.data=e.rows,t.total=e.total,1!=r&&(t.page=1);for(var c=0;c<t.data.length;c++){var u=t.data[c].remark,l=/([^\[]*?)(\[.*?\])(.*)/,i=l.exec(u);null!=i&&(t.data[c].remark1=i[1],t.data[c].remark2=i[2],t.data[c].remark3=i[3]);var m=t.data[c].type,s=/^((?!体验金).)*$/,d=s.exec(m);null==d?t.data[c].url=!0:t.data[c].url=!1}})},t.change(1),2==i.userType&&a.ajax({url:"account/getGuarantorInfo",type:"get"}).success(function(e,a,r,n){t.getGuarantor=e}).error(function(e,t,a,r){console.log(e)})}])}});