define(["angular"],function(o){return function(o,t,e,c){o.controller("headerCtrl",["$scope","$rootScope","cService","$state","$cookieStore","$http","$window",function(o,t,e,c,n,u,a){e.ajax({url:"corp/QRCodeUrl",type:"get"}).success(function(t){o.headerLogo=t}),o.totalAmountFlag=!1,o.register=function(){o.loginFalse=!0,o.loginSucc=!1,t.login.beforeLogin=!0,t.login.afterLogin=!1,t.user={},n.remove("curUser"),n.remove("curUser1"),c.go("register",{},{reload:!0})},e.ajax({url:"corp/logourl"}).success(function(t,e,c,n){o.corpLogo=t}),o.logout=function(){alert("确认要退出系统?",{type:"prompt",buttons:[{type:"submit",value:"确定",callBack:function(){e.ajax({url:"users/logout"}).success(function(e,u,a,r){o.loginFalse=!0,o.loginSucc=!1,t.login.beforeLogin=!0,t.login.afterLogin=!1,t.user={},n.remove("curUser"),n.remove("curUser1"),c.go("login"),t.user.headPortraitUrl="resources/images/account-head.png"})}},{type:"submit",value:"取消",className:"cancel"}],closeBtn:!1})},o.showWechat=function(){o.wechat=!0,o.microblog=!1},o.hideWechat=function(){o.wechat=!1},o.showMicroblog=function(){o.microblog=!0,o.wechat=!1},o.hideMicroblog=function(){o.microblog=!1},o.showQQ=function(){o.QQ=!0},o.hideQQ=function(){o.QQ=!1},o.getAmount=function(){t.login.afterLogin&&0==o.totalAmountFlag&&e.ajax({url:"account/getBalanceAvailable",type:"get"}).success(function(t){o.totalAmount=parseFloat(t).toFixed(2),o.totalAmountFlag=!0})},o.resetAmount=function(){o.totalAmountFlag=!1},o.subShow_myaccount=function(){c.go("account.myaccount",null,{reload:!0})},o.subshow_accountSet=function(){c.go("account.accountSet",null,{reload:!0})},o.subshow_accountRecord=function(){c.go("account.accountRecord",null,{reload:!0})}}])}});