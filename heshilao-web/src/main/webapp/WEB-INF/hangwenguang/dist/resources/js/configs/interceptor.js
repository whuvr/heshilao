define(["angular"],function(e){return function(r){r.config(["$compileProvider","$controllerProvider","$provide","$httpProvider",function(e,r,t,o){o.interceptors.push("testIntercepter")}]).factory("testIntercepter",["$q","G","$rootScope",function(r,t,o){var n={request:function(e){if(!_G.interfaceType){var r=e.url.lastIndexOf("/")+1;e.url="resources/interface/"+e.url.substr(r)+".json"}var t=-1===e.url.indexOf("?")?"?":"&";return e.url=e.url+t+"noCache="+(new Date).getTime(),e},response:function(r){var t=r.data;if(200==r.status){var o=e.element(this.currentElem);o.css("pointer-events",""),o.attr("disabled",""),this.currentElem&&this.currentElem.removeAttribute&&this.currentElem.removeAttribute("disabled")}return!t||0!=t.apistatus||4e4!==t.result.errorCode&&4e4!==t.result.error_code||_G.jumpLogin(),r},requestError:function(e){return r.reject(e)},responseError:function(e){var t=e.status,o=e.data;return 500==t?_G.jumpErrorPage(e):409==t&&(-200==o.code?_G.jumpLoginPage():(!o.code||"8004"!=o.code&&"2020"!=o.code&&"8005"!=o.code&&"3005"!=o.code&&"8034"!=o.code)&&("1031"==o.code||(o.message?alert(o.message,{type:"error"}):alert("系统错误",{type:"error"})))),r.reject(e)}};return n}])}});