define(["angular"],function(){return function(e,a,t,s){e.controller("accountCtrl",["$scope","navData","$rootScope","cService","$cookieStore","G",function(e,a,t,s,n,u){"use strict";t.user.isNotReadedMessage&&(e.isNotReadedMessage=t.user.isNotReadedMessage),e.navDate=[];e.getTime=function(){var e=new Date;return e.getTime()},e.subHide=function(){for(var e=1;4>=e;e++){var a=angular.element(document.getElementById("item-"+e));a.removeClass("active"),a.removeClass("sub-show"),document.getElementById("has-sub-"+e).style.display="none"}},e.setClass=function(e){for(var a=angular.element(document.getElementById("item-"+e)),t=1;4>=t;t++){var s=angular.element(document.getElementById("item-"+t));s.removeClass("sub-show")}a.addClass("sub-show"),a.addClass("active"),document.getElementById("has-sub-"+e).style.display="block"},e.subShow=function(e){for(var a=1;4>=a;a++){var t=angular.element(document.getElementById("item-"+a));t.removeClass("active"),document.getElementById("has-sub-"+a).style.display="none"}angular.element(document.getElementById("item-"+e)).addClass("active"),document.getElementById("has-sub-"+e).style.display="block"},e.init=function(){for(var e=u.getElement(document.getElementById("main-nav"),"child-item","a"),a=0;a<e.length;a++)e[a].getAttribute("ui-sref")==t.$state.current.name&&e[a].click()},e.$on("$viewContentLoaded",function(){setTimeout(function(){e.init()},"500")}),!t.user.id&&n.get("curUser")&&(t.user=n.get("curUser")),s.ajax({url:"users/getLastLoginTime"}).success(function(e){t.user.lastLoginTime=e}),s.ajax({url:"account/paymentaccount/getNamePhone",type:"get"}).success(function(s){t.corpInfo=s,t.user.canBorrow?(angular.forEach(a[0].subState,function(e,a){var s=e.className.split(" ");-1!=s.indexOf("borrow")&&(e.className="borrow"),"好友邀请"!=e.name&&"我的优惠"!=e.name&&"投资管理"!=e.name||1!=t.user.userType||(e.className="hide"),"资金管理"!=e.name||1!=t.corpInfo.tppType||1!=t.user.userType&&2!=t.user.userType||angular.forEach(e.subState,function(e,a){"银行卡"==e.name&&(e.className="hide")}),"好友邀请"!=e.name&&"我的优惠"!=e.name&&"投资管理"!=e.name||0!=t.user.userType||(e.className=""),"资金管理"==e.name&&0==t.user.userType&&angular.forEach(e.subState,function(e,a){"银行卡"==e.name&&(e.className="")}),"资金管理"==e.name&&2==t.user.userType&&1==t.corpInfo.tppType&&angular.forEach(e.subState,function(e,a){"银行卡"==e.name&&(e.className="hide")})}),e.navDate=a[0].subState):(angular.forEach(a[0].subState,function(e,a){var s=e.className.split(" ");"好友邀请"!=e.name&&"我的优惠"!=e.name&&"投资管理"!=e.name||(1==t.user.userType||2==t.user.userType?e.className="hide":0==t.user.userType&&(e.className="")),-1!=s.indexOf("borrow")&&(e.className="borrow hide"),"资金管理"==e.name&&angular.forEach(e.subState,function(e,a){"银行卡"==e.name&&(1!=t.corpInfo.tppType||1!=t.user.userType&&2!=t.user.userType?0==t.user.userType&&(e.className=""):e.className="hide")})}),e.navDate=a[0].subState),angular.forEach(a[0].subState,function(e,a){var s=e.className.split(" ");"担保管理"==e.name&&2!=t.user.userType&&(e.className="hide",-1!=s.indexOf("guarantee")&&(e.className="guarantee hide"))}),e.navDate=a[0].subState}),e.navDate=a[0].subState}])}});