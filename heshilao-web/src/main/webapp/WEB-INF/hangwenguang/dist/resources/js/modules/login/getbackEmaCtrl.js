define(["angular"],function(){return function(e,a,t,o){e.controller("getbackEmaCtrl",["$scope","$rootScope","$state","$window","cService",function(e,a,t,o,d){e.getbackEma=!0,e.getbackMob=!0,e.formData1={email:"",validCode:""},e.formData2={email:"",validCode:""},e.validCodeFn1=function(){e.valid="validCode?t="+Math.random()},e.validButton1=function(){var e=document.getElementById("getcode1");e.setAttribute("disabled","false"),e.style.background="#f8b651",e.value="60秒后重新获取";var a="秒后重新获取",t=59,o=setInterval(function(){return e.value=t+a,t--,0>t?(clearInterval(o),e.value="获取验证码",e.removeAttribute("disabled"),void(e.style.background="#ff7d00")):void 0},1e3)},e.submit1=function(a){var t=document.getElementById("getbackPsw1");t.setAttribute("disabled",!0),a.$valid&&d.ajax({url:"users/getPassword",method:"post",params:e.formData1}).success(function(){t.removeAttribute("disabled"),e.formData2.email=e.formData1.email,e.formData1={email:"",validCode:""},e.getbackEma=!1,e.validButton1()}).error(function(a){t.removeAttribute("disabled"),e.validCodeFn1()})},e.getCode1=function(){d.ajax({url:"users/getPasswordCode",params:{email:e.formData2.email},method:"post"}),e.validButton1()},e.submit2=function(a){a.$valid&&d.ajax({url:"users/checkCode",method:"post",params:{validCode:e.formData2.validCode}}).success(function(){e.formData2={validCode:""},t.go("login.modifyPsw")})},e.formData3={phone:"",validCode:""},e.formData4={phone:"",validCode:""},e.validCodeFn2=function(){e.valid="validCode?t="+Math.random()},e.validButton2=function(){var e=document.getElementById("getcode2");e.setAttribute("disabled","false"),e.style.background="#f8b651",e.value="60秒后重新获取";var a="秒后重新获取",t=59,o=setInterval(function(){return e.value=t+a,t--,0>t?(clearInterval(o),e.value="获取验证码",e.removeAttribute("disabled"),void(e.style.background="#ff7d00")):void 0},1e3)},e.submit3=function(a){var t=document.getElementById("getbackPsw2");t.setAttribute("disabled",!0),a.$valid&&d.ajax({url:"users/getPassword",method:"post",params:e.formData3}).success(function(){t.removeAttribute("disabled"),e.formData4.phone=e.formData3.phone,e.formData3={phone:"",validCode:""},e.getbackMob=!1,e.validButton2()}).error(function(a){t.removeAttribute("disabled"),e.validCodeFn2()})},e.getCode2=function(){d.ajax({url:"users/getPasswordCode",params:{phone:e.formData4.phone},method:"post"}),e.validButton2()},e.submit4=function(a){a.$valid&&d.ajax({url:"users/checkCode",method:"post",params:{validCode:e.formData4.validCode}}).success(function(){e.formData4={validCode:""},t.go("login.modifyPsw")})}}])}});